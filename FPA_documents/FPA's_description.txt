This description is in Japanese. So if you are not Japanese, Please use something to transrate.

以下が目次になります。
0.はじめに
1.FPAとは
2.FPAの使い方
3.FPAの今後の展望
4.おわりに

0.はじめに
  こちらのテキストは、私の初のポートフォリオであるFPAについての説明になります。FPAは「株式投資」に特化したツールです。みなさんご存知の通り、現在日本では、老後2000万円問題等による資産運用の必要性
が叫ばれています。そうした中で、我々にとって投資が身近なものになりつつも、何に投資すれはいいのか分からないというのが本音だと考えられます。私事ですが、作成者は大学3年でファイナンスを専攻していますが、
専門性が高く自身で投資の判断力を身に付けようにも、かなりの勉強量が必要な為悩んでいました。そこで、投資の判断をプログラミングに任せることで誰でも簡単に分析が行えるようにしたいと思い制作しました。


1.FPAとは
  FPAとは、私が作成した株式投資で重要な財務指標の分析ツール(Financial Pointer Analyzer)のことです。このFPAを利用する事により「1 財務指標から基づく企業のパフォーマンスの総合評価」
「2 機械学習的手法である重回帰分析によるリターン予測」を行うことが出来ます。こちらの分析は、東京証券取引所に登録させている上場企業約4000社を対象としています。(2020年4月11日現在)

FPAの具体的な説明をする前に複数の用語の簡単な説明をさせて頂きます。
1-1 株式投資とは
 株式投資とは、企業が資金調達の際に発行する「株式」を購入し、将来的にリターン(利益)を出す投資方法になります。投資を行う株主は、配当金や株主優待などの"インカムゲイン"と株価の値上がり
益の"キャピタルゲイン"により、リターンを得ることが出来ます。

1-2 財務指標とは
 財務指標とは、会社の業績や財政状態を評価する際に用いられる指標のことです。例えば、会社の総合的な収益力を示す「ROE」も財務指標の１つです。ちなみにですが、そうした指標等を用いて、
企業業績を可視化し株価の予測や企業評価を分析することを財務諸表分析と言います。



2.FPAの使い方
  FPAの使い方として大きく３つのプロセスがあります。1つ目は「企業データの取得」、2つ目は「取得したデータの加工」、３つ目は「加工したデータに対する分析」です。順を追って説明させて頂き
ます。今回使い方をわかりやすくする為、文章だけでなく動画を作成しましたので是非見て頂ければと思います。
  
2-0 ダウンロードしてからの準備
  1~3のプロセスの前に少々行って頂きたいことがありますのでご理解頂ければと思います。FPAをダウンロードした後、"work1_Fetching"のフォルダに”df_q”, "df_day", "df_c"という名前の空フォルダ
  を作成してください。(詳しい方法は添付した動画に説明しましたのでご覧ください。)


2-1 企業データの取得
  企業データをバフェットコード(日本企業の決算データ等が取得できるサイト)のAPIを利用し取得を行います。データの取得方法は、"work1_Fetching"のディレクトリ内にある"work1.py"を利用します。
使い方は簡単で"f5を押したのちで実行を押す"だけです。しかしながら、ここで注意事項が2点あります。
  1つ目は、apiを利用するにはバフェットコードの有料機能を使う必要があることです。(有料機能は一カ月10,800JPYになります)もし有料機能の権利を得ている方でしたら、"work1.py"の your apikey 
というコードに自身のapikeyを入れてください。
  2つ目は、バフェットコードのapiのリクエスト制限の関係で取得するために約2週間を要することです。(一日当たり300社のデータを取得出来るが、今回約4000社を取得するため。)この負担を少しでも
  改善するために、リクエスト制限がかかった場合、取得した企業の証券コードをセーブし続きから始められるようにしています。改良版では、制限回避のために期間を狭めたり企業数を絞る予定でいます。
以上が「企業データの取得」での使い方です。ちなみにですが、取得するデータは以下になります。
1 過去3年分(12四半期分)の四半期決算および本決算のデータを取得, 2 過去三年分の毎日の株価および株価指標の四半期ごとの平均値を取得, 3 現在(直近営業日)の株価および株価指標の取得

2-2 取得したデータの加工
  企業データを約2週間掛けて取得した後、データを財務指標等に加工します。こちらに関しては、"work2_Processing"のディレクトリ内にある"work2.py"を実行するだけで加工を行うことが出来ます。
  (約５分ほど掛かります。)今回分析する為の財務指標は以下になりますが、専門性が高い為参考程度にお願いします。
＜今回分析する指標＞
安全性    :流動性比率, 自己資本比率, インタレスト・カバレッジ・レシオ, 安全性余裕率, 有利子負債営業CF倍率     /計5指標
成長性    :純資産成長率, 売上高成長率, 純利益成長率, 営業CF成長率, ROIC     /計5指標
収益性    :売上高原価率, 売上高販管費率, ROE, EVAスプレッド, 営業CF純利益率     /計5指標
割安性    :PSR, PCFR ,Mix係数, EV/EBITDA倍率, FCF理論株価と市場株価との乖離割合     /計5指標
効率性    :総資産回転率, CCC    /計2指標
労働生産性：従業員一人あたりの売上高, 従業員一人あたりの営業CF     /計2指標
株主還元性：DOE, 配当性向     /計2指標           (重回帰分析の説明変数として上記含めた約25指標を利用)

リターン  ：キャピタルゲイン, インカムゲイン      (重回帰分析の目的変数として利用)

2-3 加工したデータの分析
  加工したデータを、2つの手法を用いて分析を行います。使い方としては、本テキストの同じ階層にある"main.py"を実行することで使うことが出来ます。順に2つの手法について説明します。
  一つ目の手法は「企業の総合力調査」です。こちらの手法は、前述したリターン以外の指標群の数値をそれぞれ企業ごとに評価しポイント付けし、最終的にポイントのを平均化し総合的に指標の値が良い
企業TOP3を出力するものとなっています。これを用いることにより、金融機関に務める外務員や証券アナリストの企業の業績評価を簡単に行うことが出来ます。
  2つ目の手法は「重回帰分析によるリターンの予測」です(重回帰分析の説明は割愛します)。前述したリターンを目的変数、それ以外の指標を説明変数とし、リターンが他の財務指標に対してどれだけ影響
を受けているか分析し、実測値(実際のリターン)が予測値(回帰式に基づく理論上のリターン)より大きく乖離している企業を出力するものとなっています。これを用いることにより、機会学習に基づいた次世代
の投資判断を行うことが出来ます。(こちらに関しては最低限の統計学の知識が必要なため注意が必要です)
  上記二つの手法は、企業全体だけでなく、業種ごと更には指定した企業の分析を行うことが出来ます。その為、自身が分析したい企業をよりピンポイントで分析することを可能としています。


3.今後の展望
  今後の展望といたしましては、大学卒業までの2年間で以下の２点を実装出来ればと考えています。
  1つ目は、分析結果で抽出された銘柄の、分散投資の最適組み入れ比率を出してくれるwebサービスを作成したいです。どのくらいの配分で投資すべきか分かる為です。
  2つ目は、分析手法の改善です。今回２つの分析手法を用いりましたが、ニューラルネットワークやランダムフォレストなど他の分析方法を試す価値も十分にある為です。
  上記の２点を優先的に実装し、最終的にwebサービス等に展開出来ればと考えています。


4.おわりに
  ここまで読む時間を私に下さりありがとうございました。今回初のポートフォリオ挑戦の為、スパゲッティコードになっているかもしれませんが、随時改善していきますのでご容赦頂けたら幸いです。
もし何かご質問等あれば気軽にご連絡ください、皆さんどうぞよろしくお願いいたします！  






